{"version":3,"sources":["../../src/lib/A-Operation/A-Operation.context.ts"],"names":[],"mappings":";;;;AAYO,IAAM,kBAAA,GAAN,cAKG,kBAAA,CAGR;AAAA,EAEE,WAAA,CACI,WACA,MAAA,EACF;AACE,IAAA,KAAA,CAAM,mBAAmB,CAAA;AAEzB,IAAA,IAAA,CAAK,IAAA,CAAK,GAAA,CAAI,MAAA,EAAQ,SAAS,CAAA;AAC/B,IAAA,IAAA,CAAK,IAAA,CAAK,GAAA,CAAI,QAAA,EAAU,MAAA,IAAU,EAAiB,CAAA;AAAA,EACvD;AAAA,EAEA,IAAI,IAAA,GAA2B;AAC3B,IAAA,OAAQ,IAAA,CAAK,KAAA,CAAM,GAAA,CAAI,MAAM,KAAK,IAAA,CAAK,KAAA;AAAA,EAC3C;AAAA,EAEA,IAAI,MAAA,GAAkC;AAClC,IAAA,OAAO,IAAA,CAAK,KAAA,CAAM,GAAA,CAAI,QAAQ,CAAA;AAAA,EAClC;AAAA,EAEA,IAAI,KAAA,GAA6B;AAC7B,IAAA,OAAO,IAAA,CAAK,KAAA,CAAM,GAAA,CAAI,OAAO,CAAA;AAAA,EACjC;AAAA,EAEA,IAAI,MAAA,GAAsB;AACtB,IAAA,OAAO,IAAA,CAAK,KAAA,CAAM,GAAA,CAAI,QAAQ,KAAK,EAAC;AAAA,EACxC;AAAA,EAGA,KAAK,KAAA,EAAsB;AACvB,IAAA,IAAA,CAAK,KAAA,CAAM,GAAA,CAAI,OAAA,EAAS,KAAK,CAAA;AAAA,EACjC;AAAA,EAEA,QAAQ,MAAA,EAA2B;AAC/B,IAAA,IAAA,CAAK,KAAA,CAAM,GAAA,CAAI,QAAA,EAAU,MAAM,CAAA;AAAA,EACnC;AAAA,EAGA,MAAA,GAA2D;AACvD,IAAA,OAAO;AAAA,MACH,MAAM,IAAA,CAAK,IAAA;AAAA,MACX,QAAQ,IAAA,CAAK,MAAA;AAAA,MACb,MAAA,EAAQ,IAAA,CAAK,MAAA,IAAU,EAAC;AAAA,MACxB,KAAA,EAAO,IAAA,CAAK,KAAA,EAAO,MAAA;AAAO,KAC9B;AAAA,EACJ;AACJ;AAtDa,kBAAA,GAAN,eAAA,CAAA;AAAA,EALN,QAAQ,QAAA,CAAS;AAAA,IACd,SAAA,EAAW,SAAA;AAAA,IACX,IAAA,EAAM,oBAAA;AAAA,IACN,WAAA,EAAa;AAAA,GAChB;AAAA,CAAA,EACY,kBAAA,CAAA","file":"chunk-72ANHWNG.mjs","sourcesContent":["import { A_Error, A_Fragment } from \"@adaas/a-concept\";\nimport { A_Operation_Serialized, A_Operation_Storage } from \"./A-Operation.types\";\nimport { A_ExecutionContext } from \"@adaas/a-utils/a-execution\";\nimport { A_Frame } from \"@adaas/a-frame\";\n\n\n\n@A_Frame.Fragment({\n    namespace: 'A-Utils',\n    name: 'A-OperationContext',\n    description: 'Operation execution context that encapsulates the metadata and serialized data related to a specific operation. It provides structured access to operation parameters, results, and error handling, facilitating the management of operation lifecycles within the application.'\n})\nexport class A_OperationContext<\n    _AllowedOperations extends string = string,\n    _ParamsType extends Record<string, any> = Record<string, any>,\n    _ResultType = any,\n    _StorageType extends A_Operation_Storage<_ResultType, _ParamsType> = A_Operation_Storage<_ResultType, _ParamsType>\n> extends A_ExecutionContext<\n    _StorageType,\n    A_Operation_Serialized<_ResultType, _ParamsType>\n> {\n\n    constructor(\n        operation: _AllowedOperations,\n        params?: _ParamsType\n    ) {\n        super('operation-context');\n\n        this.meta.set('name', operation);\n        this.meta.set('params', params || {} as _ParamsType);\n    }\n\n    get name(): _AllowedOperations {\n        return (this._meta.get('name') || this._name) as _AllowedOperations;\n    }\n\n    get result(): _ResultType | undefined {\n        return this._meta.get('result');\n    }\n\n    get error(): A_Error | undefined {\n        return this._meta.get('error');\n    }\n\n    get params(): _ParamsType {\n        return this._meta.get('params') || {} as _ParamsType;\n    }\n\n\n    fail(error: A_Error): void {\n        this._meta.set('error', error);\n    }\n\n    succeed(result: _ResultType): void {\n        this._meta.set('result', result);\n    }\n\n\n    toJSON(): A_Operation_Serialized<_ResultType, _ParamsType> {\n        return {\n            name: this.name,\n            params: this.params,\n            result: this.result || {} as _ResultType,\n            error: this.error?.toJSON(),\n        }\n    }\n}"]}