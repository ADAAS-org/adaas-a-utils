{"version":3,"sources":["../../../../../src/lib/A-Config/components/FileConfigReader.component.ts"],"names":[],"mappings":";;;;;AAWO,IAAM,gBAAA,GAAN,cAA+B,YAAA,CAAa;AAAA,EAA5C,WAAA,GAAA;AAAA,IAAA,KAAA,CAAA,GAAA,SAAA,CAAA;AAEH,IAAA,IAAA,CAAQ,QAAA,uBAAiC,GAAA,EAAiB;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAM1D,oCAAoC,QAAA,EAA0B;AAC1D,IAAA,OAAO,iBAAA,CAAkB,YAAY,QAAQ,CAAA;AAAA,EACjD;AAAA,EAGA,QAA2B,QAAA,EAA+B;AACtD,IAAA,OAAO,KAAK,QAAA,CAAS,GAAA,CAAI,IAAA,CAAK,mCAAA,CAAoC,QAAQ,CAAC,CAAA;AAAA,EAC/E;AAAA,EAGA,MAAM,KACF,SAAA,EACuB;AAEvB,IAAA,MAAM,EAAA,GAAK,MAAM,IAAA,CAAK,QAAA,CAAS,EAAA,EAAG;AAElC,IAAA,IAAI;AACA,MAAA,MAAM,OAAO,EAAA,CAAG,YAAA,CAAa,GAAG,SAAA,CAAU,OAAO,cAAc,MAAM,CAAA;AAErE,MAAA,MAAM,MAAA,GAAyB,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAE9C,MAAA,IAAA,CAAK,WAAW,IAAI,GAAA,CAAI,MAAA,CAAO,OAAA,CAAQ,MAAM,CAAC,CAAA;AAE9C,MAAA,OAAO,MAAA;AAAA,IAEX,SAAS,KAAA,EAAO;AAEZ,MAAA,OAAO,EAAC;AAAA,IACZ;AAAA,EACJ;AACJ;AAtCa,gBAAA,GAAN,eAAA,CAAA;AAAA,EALN,QAAQ,SAAA,CAAU;AAAA,IACf,SAAA,EAAW,SAAA;AAAA,IACX,IAAA,EAAM,kBAAA;AAAA,IACN,WAAA,EAAa;AAAA,GAChB;AAAA,CAAA,EACY,gBAAA,CAAA","file":"FileConfigReader.component.mjs","sourcesContent":["import { A_Context, A_FormatterHelper } from \"@adaas/a-concept\";\nimport { ConfigReader } from \"./ConfigReader.component\";\nimport { A_Frame } from \"@adaas/a-frame\";\n\n\n\n@A_Frame.Component({\n    namespace: 'A-Utils',\n    name: 'FileConfigReader',\n    description: 'Configuration reader that loads configuration data from a JSON file located in the application root directory. It reads the file named after the current concept with a .conf.json extension and parses its contents into the configuration context.'\n})\nexport class FileConfigReader extends ConfigReader {\n\n    private FileData: Map<string, any> = new Map<string, any>();\n\n    /**\n     * Get the configuration property Name\n     * @param property \n     */\n    getConfigurationProperty_File_Alias(property: string): string {\n        return A_FormatterHelper.toCamelCase(property);\n    }\n\n\n    resolve<_ReturnType = any>(property: string): _ReturnType {\n        return this.FileData.get(this.getConfigurationProperty_File_Alias(property)) as _ReturnType;\n    }\n\n\n    async read<T extends string>(\n        variables?: Array<T>\n    ): Promise<Record<T, any>> {\n\n        const fs = await this.polyfill.fs();\n\n        try {\n            const data = fs.readFileSync(`${A_Context.concept}.conf.json`, 'utf8');\n\n            const config: Record<T, any> = JSON.parse(data);\n\n            this.FileData = new Map(Object.entries(config));\n\n            return config;\n\n        } catch (error) {\n            // this.context.Logger.error(error);\n            return {} as Record<T, any>;\n        }\n    }\n}\n"]}