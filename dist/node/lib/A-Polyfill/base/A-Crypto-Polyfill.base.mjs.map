{"version":3,"sources":["../../../../../src/lib/A-Polyfill/base/A-Crypto-Polyfill.base.ts"],"names":[],"mappings":";;AAGO,MAAe,oBAAA,CAAqB;AAAA,EAKvC,YACc,MAAA,EACZ;AADY,IAAA,IAAA,CAAA,MAAA,GAAA,MAAA;AAJd,IAAA,IAAA,CAAU,YAAA,GAAwB,KAAA;AAAA,EAK/B;AAAA,EAEH,IAAI,aAAA,GAAyB;AACzB,IAAA,OAAO,IAAA,CAAK,YAAA;AAAA,EAChB;AAAA,EAEA,MAAM,IAAI,UAAA,EAAqD;AAC3D,IAAA,IAAI,CAAC,KAAK,YAAA,EAAc;AACpB,MAAA,IAAA,CAAK,WAAA,GAAc,UAAA;AACnB,MAAA,MAAM,KAAK,IAAA,EAAK;AAAA,IACpB;AACA,IAAA,OAAO,IAAA,CAAK,OAAA;AAAA,EAChB;AAAA,EAEA,MAAgB,IAAA,GAAsB;AAClC,IAAA,IAAI;AACA,MAAA,MAAM,KAAK,kBAAA,EAAmB;AAC9B,MAAA,IAAA,CAAK,YAAA,GAAe,IAAA;AAAA,IACxB,SAAS,KAAA,EAAO;AACZ,MAAA,IAAA,CAAK,MAAA,CAAO,KAAA,CAAM,sCAAA,EAAwC,KAAK,CAAA;AAC/D,MAAA,MAAM,KAAA;AAAA,IACV;AAAA,EACJ;AAGJ","file":"A-Crypto-Polyfill.base.mjs","sourcesContent":["import type { A_Logger } from \"@adaas/a-utils/a-logger\";\nimport { IcryptoInterface, Ifspolyfill } from \"../A-Polyfill.types\";\n\nexport abstract class A_CryptoPolyfillBase {\n    protected _crypto!: IcryptoInterface;\n    protected _initialized: boolean = false;\n    protected _fsPolyfill?: Ifspolyfill;\n\n    constructor(\n        protected logger: A_Logger\n    ) {}\n\n    get isInitialized(): boolean {\n        return this._initialized;\n    }\n\n    async get(fsPolyfill?: Ifspolyfill): Promise<IcryptoInterface> {\n        if (!this._initialized) {\n            this._fsPolyfill = fsPolyfill;\n            await this.init();\n        }\n        return this._crypto;\n    }\n\n    protected async init(): Promise<void> {\n        try {\n            await this.initImplementation();\n            this._initialized = true;\n        } catch (error) {\n            this.logger.error('Failed to initialize crypto polyfill', error);\n            throw error;\n        }\n    }\n\n    protected abstract initImplementation(): Promise<void>;\n}"]}