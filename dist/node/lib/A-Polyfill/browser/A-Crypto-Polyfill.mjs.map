{"version":3,"sources":["../../../../../src/lib/A-Polyfill/browser/A-Crypto-Polyfill.ts"],"names":[],"mappings":";;;AAGO,MAAM,yBAAyB,oBAAA,CAAqB;AAAA,EACvD,YAAY,MAAA,EAAkB;AAC1B,IAAA,KAAA,CAAM,MAAM,CAAA;AAAA,EAChB;AAAA,EAEA,MAAgB,kBAAA,GAAoC;AAChD,IAAA,IAAA,CAAK,OAAA,GAAU;AAAA,MACX,gBAAgB,MAAM;AAClB,QAAA,IAAA,CAAK,MAAA,CAAO,QAAQ,gDAAgD,CAAA;AACpE,QAAA,OAAO,OAAA,CAAQ,QAAQ,EAAE,CAAA;AAAA,MAC7B,CAAA;AAAA,MACA,cAAA,EAAgB,CAAC,IAAA,EAAc,SAAA,GAAoB,cAAc,IAAI,OAAA,CAAgB,OAAO,OAAA,EAAS,MAAA,KAAW;AAC5G,QAAA,IAAI;AACA,UAAA,IAAI,CAAC,OAAO,MAAA,EAAQ;AAChB,YAAA,MAAM,IAAI,MAAM,4BAA4B,CAAA;AAAA,UAChD;AACA,UAAA,MAAM,OAAA,GAAU,IAAI,WAAA,EAAY;AAChC,UAAA,MAAM,IAAA,GAAO,OAAA,CAAQ,MAAA,CAAO,IAAI,CAAA;AAChC,UAAA,MAAM,aAAa,MAAM,MAAA,CAAO,MAAA,CAAO,MAAA,CAAO,WAAW,IAAI,CAAA;AAC7D,UAAA,MAAM,YAAY,KAAA,CAAM,IAAA,CAAK,IAAI,UAAA,CAAW,UAAU,CAAC,CAAA;AACvD,UAAA,MAAM,aAAa,IAAA,CAAK,MAAA,CAAO,YAAA,CAAa,GAAG,SAAS,CAAC,CAAA;AACzD,UAAA,OAAA,CAAQ,CAAA,EAAG,SAAS,CAAA,CAAA,EAAI,UAAU,CAAA,CAAE,CAAA;AAAA,QACxC,SAAS,KAAA,EAAO;AACZ,UAAA,MAAA,CAAO,KAAK,CAAA;AAAA,QAChB;AAAA,MACJ,CAAC;AAAA,KACL;AAAA,EACJ;AACJ","file":"A-Crypto-Polyfill.mjs","sourcesContent":["import type { A_Logger } from \"@adaas/a-utils/a-logger\";\nimport { A_CryptoPolyfillBase } from \"../base/A-Crypto-Polyfill.base\";\n\nexport class A_CryptoPolyfill extends A_CryptoPolyfillBase {\n    constructor(logger: A_Logger) {\n        super(logger);\n    }\n\n    protected async initImplementation(): Promise<void> {\n        this._crypto = {\n            createFileHash: () => {\n                this.logger.warning('File hash not available in browser environment');\n                return Promise.resolve('');\n            },\n            createTextHash: (text: string, algorithm: string = 'SHA-384') => new Promise<string>(async (resolve, reject) => {\n                try {\n                    if (!crypto.subtle) {\n                        throw new Error('SubtleCrypto not available');\n                    }\n                    const encoder = new TextEncoder();\n                    const data = encoder.encode(text);\n                    const hashBuffer = await crypto.subtle.digest(algorithm, data);\n                    const hashArray = Array.from(new Uint8Array(hashBuffer));\n                    const hashBase64 = btoa(String.fromCharCode(...hashArray));\n                    resolve(`${algorithm}-${hashBase64}`);\n                } catch (error) {\n                    reject(error);\n                }\n            })\n        };\n    }\n}"]}