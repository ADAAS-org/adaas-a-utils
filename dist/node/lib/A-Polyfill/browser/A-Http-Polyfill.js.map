{"version":3,"sources":["../../../../../src/lib/A-Polyfill/browser/A-Http-Polyfill.ts"],"names":["A_HttpPolyfillBase"],"mappings":";;;;AAGO,MAAM,uBAAuBA,qCAAA,CAAmB;AAAA,EACnD,YAAY,MAAA,EAAkB;AAC1B,IAAA,KAAA,CAAM,MAAM,CAAA;AAAA,EAChB;AAAA,EAEA,MAAgB,kBAAA,GAAoC;AAChD,IAAA,IAAA,CAAK,KAAA,GAAQ;AAAA,MACT,OAAA,EAAS,CAAC,OAAA,EAAc,QAAA,KAAkC;AACtD,QAAA,IAAA,CAAK,MAAA,CAAO,QAAQ,2EAA2E,CAAA;AAC/F,QAAA,OAAO,IAAA,CAAK,iBAAA,CAAkB,OAAA,EAAS,QAAA,EAAU,KAAK,CAAA;AAAA,MAC1D,CAAA;AAAA,MACA,GAAA,EAAK,CAAC,GAAA,EAAmB,QAAA,KAAkC;AACvD,QAAA,IAAA,CAAK,MAAA,CAAO,QAAQ,uEAAuE,CAAA;AAC3F,QAAA,OAAO,IAAA,CAAK,iBAAA,CAAkB,OAAO,GAAA,KAAQ,QAAA,GAAW,EAAE,QAAA,EAAU,GAAA,EAAI,GAAI,GAAA,EAAK,QAAA,EAAU,KAAK,CAAA;AAAA,MACpG,CAAA;AAAA,MACA,cAAc,MAAM;AAChB,QAAA,IAAA,CAAK,MAAA,CAAO,MAAM,6DAA6D,CAAA;AAC/E,QAAA,OAAO,IAAA;AAAA,MACX;AAAA,KACJ;AAAA,EACJ;AAAA,EAEQ,iBAAA,CAAkB,OAAA,EAAc,QAAA,EAA+B,OAAA,GAAmB,KAAA,EAAO;AAE7F,IAAA,MAAM,OAAA,GAAU;AAAA,MACZ,KAAK,MAAM;AAEP,QAAA,IAAI,QAAA,EAAU;AACV,UAAA,MAAM,YAAA,GAAe;AAAA,YACjB,UAAA,EAAY,GAAA;AAAA,YACZ,SAAS,EAAC;AAAA,YACV,EAAA,EAAI,CAAC,KAAA,EAAe,OAAA,KAAsB;AACtC,cAAA,IAAI,UAAU,MAAA,EAAQ;AAClB,gBAAA,UAAA,CAAW,MAAM,OAAA,CAAQ,WAAW,CAAA,EAAG,CAAC,CAAA;AAAA,cAC5C,CAAA,MAAA,IAAW,UAAU,KAAA,EAAO;AACxB,gBAAA,UAAA,CAAW,MAAM,OAAA,EAAQ,EAAG,CAAC,CAAA;AAAA,cACjC;AAAA,YACJ,CAAA;AAAA,YACA,IAAA,EAAM,CAAC,IAAA,KAAc;AACjB,cAAA,IAAI,IAAA,CAAK,KAAA,EAAO,IAAA,CAAK,KAAA,CAAM,WAAW,CAAA;AACtC,cAAA,IAAI,IAAA,CAAK,GAAA,EAAK,IAAA,CAAK,GAAA,EAAI;AAAA,YAC3B;AAAA,WACJ;AACA,UAAA,UAAA,CAAW,MAAM,QAAA,CAAS,YAAY,CAAA,EAAG,CAAC,CAAA;AAAA,QAC9C;AAAA,MACJ,CAAA;AAAA,MACA,KAAA,EAAO,CAAC,IAAA,KAAc;AAAA,MAEtB,CAAA;AAAA,MACA,EAAA,EAAI,CAAC,KAAA,EAAe,OAAA,KAAsB;AAAA,MAE1C;AAAA,KACJ;AAEA,IAAA,OAAO,OAAA;AAAA,EACX;AACJ","file":"A-Http-Polyfill.js","sourcesContent":["import { A_Logger } from \"@adaas/a-utils/a-logger\";\nimport { A_HttpPolyfillBase } from \"../base/A-Http-Polyfill.base\";\n\nexport class A_HttpPolyfill extends A_HttpPolyfillBase {\n    constructor(logger: A_Logger) {\n        super(logger);\n    }\n\n    protected async initImplementation(): Promise<void> {\n        this._http = {\n            request: (options: any, callback?: (res: any) => void) => {\n                this.logger.warning('http.request not available in browser/test environment, use fetch instead');\n                return this.createMockRequest(options, callback, false);\n            },\n            get: (url: string | any, callback?: (res: any) => void) => {\n                this.logger.warning('http.get not available in browser/test environment, use fetch instead');\n                return this.createMockRequest(typeof url === 'string' ? { hostname: url } : url, callback, false);\n            },\n            createServer: () => {\n                this.logger.error('http.createServer not available in browser/test environment');\n                return null;\n            }\n        };\n    }\n\n    private createMockRequest(options: any, callback?: (res: any) => void, isHttps: boolean = false) {\n        // Return a mock request that doesn't make real network calls\n        const request = {\n            end: () => {\n                // Mock response for all environments\n                if (callback) {\n                    const mockResponse = {\n                        statusCode: 200,\n                        headers: {},\n                        on: (event: string, handler: Function) => {\n                            if (event === 'data') {\n                                setTimeout(() => handler('mock data'), 0);\n                            } else if (event === 'end') {\n                                setTimeout(() => handler(), 0);\n                            }\n                        },\n                        pipe: (dest: any) => {\n                            if (dest.write) dest.write('mock data');\n                            if (dest.end) dest.end();\n                        }\n                    };\n                    setTimeout(() => callback(mockResponse), 0);\n                }\n            },\n            write: (data: any) => {\n                // Mock write\n            },\n            on: (event: string, handler: Function) => {\n                // Mock event handling\n            }\n        };\n\n        return request;\n    }\n}"]}