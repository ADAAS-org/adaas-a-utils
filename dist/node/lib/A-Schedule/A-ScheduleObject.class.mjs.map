{"version":3,"sources":["../../../../src/lib/A-Schedule/A-ScheduleObject.class.ts"],"names":[],"mappings":";;;;AAIO,MAAM,gBAAA,CAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAwB/C,WAAA,CAII,EAAA,EAIA,MAAA,EAIA,MAAA,EACF;AAhCF,IAAA,IAAA,CAAQ,MAAA,GAA8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAOlD,cAAA,EAAgB;AAAA,KACpB;AAyBI,IAAA,IAAI,MAAA;AACA,MAAA,IAAA,CAAK,SAAS,EAAE,GAAG,IAAA,CAAK,MAAA,EAAQ,GAAG,MAAA,EAAO;AAE9C,IAAA,IAAA,CAAK,QAAA,GAAW,IAAI,UAAA,EAAc;AAElC,IAAA,IAAA,CAAK,OAAA,GAAU,UAAA;AAAA,MACX,MAAM,QAAO,CACR,IAAA,CAAK,IAAI,IAAA,KAAS,IAAA,CAAK,SAAS,OAAA,CAAQ,GAAG,IAAI,CAAC,CAAA,CAChD,MAAM,CAAA,GAAI,IAAA,KAAS,KAAK,QAAA,CAAS,MAAA,CAAO,GAAG,IAAI,CAAC,CAAA;AAAA,MACrD;AAAA,KACJ;AAAA,EACJ;AAAA,EAEA,IAAI,OAAA,GAAsB;AACtB,IAAA,OAAO,KAAK,QAAA,CAAS,OAAA;AAAA,EACzB;AAAA,EAEA,KAAA,GAAc;AACV,IAAA,IAAI,KAAK,OAAA,EAAS;AACd,MAAA,YAAA,CAAa,KAAK,OAAO,CAAA;AAEzB,MAAA,IAAI,KAAK,MAAA,CAAO,cAAA;AACZ,QAAA,IAAA,CAAK,QAAA,CAAS,QAAQ,MAAc,CAAA;AAAA;AAEpC,QAAA,IAAA,CAAK,QAAA,CAAS,MAAA,CAAO,IAAI,OAAA,CAAQ,iBAAiB,CAAC,CAAA;AAAA,IAC3D;AAAA,EACJ;AACJ","file":"A-ScheduleObject.class.mjs","sourcesContent":["import { A_Deferred } from \"./A-Deferred.class\";\nimport { A_Error } from \"@adaas/a-concept\";\nimport { A_UTILS_TYPES__ScheduleObjectCallback, A_UTILS_TYPES__ScheduleObjectConfig } from \"./A-Schedule.types\";\n\nexport class A_ScheduleObject<T extends any = any> {\n\n    private timeout!: NodeJS.Timeout;\n    private deferred!: A_Deferred<T>;\n\n    private config: A_UTILS_TYPES__ScheduleObjectConfig = {\n        /**\n         * If the timeout is cleared, should the promise resolve or reject?\n         * BY Default it rejects\n         * \n         * !!!NOTE: If the property is set to true, the promise will resolve with undefined\n         */\n        resolveOnClear: false\n    };\n\n\n    /**\n     * Creates a scheduled object that will execute the action after specified milliseconds\n     * \n     * \n     * @param ms - milliseconds to wait before executing the action\n     * @param action - the action to execute\n     * @param config - configuration options for the schedule object\n     */\n    constructor(\n        /**\n         * Milliseconds to wait before executing the action\n         */\n        ms: number,\n        /**\n         * The action to execute after the specified milliseconds\n         */\n        action: A_UTILS_TYPES__ScheduleObjectCallback<T>,\n        /**\n         * Configuration options for the schedule object\n         */\n        config?: A_UTILS_TYPES__ScheduleObjectConfig\n    ) {\n        if (config)\n            this.config = { ...this.config, ...config };\n\n        this.deferred = new A_Deferred<T>();\n\n        this.timeout = setTimeout(\n            () => action()\n                .then((...args) => this.deferred.resolve(...args))\n                .catch((...args) => this.deferred.reject(...args)),\n            ms\n        );\n    }\n\n    get promise(): Promise<T> {\n        return this.deferred.promise;\n    }\n\n    clear(): void {\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n\n            if (this.config.resolveOnClear)\n                this.deferred.resolve(undefined as T);\n            else\n                this.deferred.reject(new A_Error(\"Timeout Cleared\"));\n        }\n    }\n}\n\n"]}